{% extends 'base.html' %} {% block title %}Plantify - Supplement Market{%
endblock %} {% block body %}
<section id="market" class="py-24 bg-gradient-to-b from-gray-50 to-gray-100">
  <div class="container mx-auto px-6">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold tracking-tight text-gray-900">
        Supplement Marketplace
      </h2>
      <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">
        Browse supplements and fertilizers for healthy or diseased plants.
      </p>
    </div>

    <div class="flex flex-wrap justify-center gap-4 mb-12">
      <button
        data-filter="all"
        class="filter-btn active px-5 py-2 border border-green-600 text-white bg-green-600 rounded-full transition"
      >
        All
      </button>
      <button
        data-filter="healthy"
        class="filter-btn px-5 py-2 border border-green-600 text-green-600 rounded-full hover:bg-green-600 hover:text-white transition"
      >
        Healthy Plants
      </button>
      <button
        data-filter="diseased"
        class="filter-btn px-5 py-2 border border-green-600 text-green-600 rounded-full hover:bg-green-600 hover:text-white transition"
      >
        Disease Control
      </button>
    </div>

    <div
      id="product-grid"
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10"
    >
      {% for product in products %}
      <div
        class="product-card {{ product.type }} bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col transform hover:-translate-y-1"
      >
        <div class="relative overflow-hidden group">
          <img
            src="{{ product.image }}"
            alt="{{ product.name }}"
            loading="lazy"
            class="w-full h-56 object-cover transition-transform duration-500 ease-in-out group-hover:scale-105"
          />
        </div>

        <div class="p-6 flex flex-col flex-grow">
          <h3 class="text-base font-semibold text-gray-900 line-clamp-2 mb-3">
            {{ product.name }}
          </h3>

          {% if product.type == 'healthy' %}
          <span
            class="inline-block bg-green-100 text-green-700 text-xs font-medium px-3 py-1 rounded-full mb-4 self-start"
            >For Healthy Plants</span
          >
          {% else %}
          <span
            class="inline-block bg-red-100 text-red-700 text-xs font-medium px-3 py-1 rounded-full mb-4 self-start"
            >Disease Control</span
          >
          {% endif %}

          <div class="flex-grow"></div>

          <a
            href="{{ product.purchase_url }}"
            target="_blank"
            class="inline-flex justify-center items-center w-full border border-green-600 text-green-600 text-sm font-medium rounded-md py-2 mt-2 transition-all duration-300 hover:bg-green-600 hover:text-white active:scale-95"
          >
            Buy Now
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<script>
  const filterButtons = document.querySelectorAll(".filter-btn");
  const productCards = document.querySelectorAll(".product-card");

  filterButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      filterButtons.forEach((b) =>
        b.classList.remove("active", "bg-green-600", "text-white")
      );
      btn.classList.add("active", "bg-green-600", "text-white");

      const filter = btn.getAttribute("data-filter");

      productCards.forEach((card) => {
        if (filter === "all" || card.classList.contains(filter)) {
          card.style.display = "flex";
        } else {
          card.style.display = "none";
        }
      });
    });
  });
</script>
{% endblock %}
